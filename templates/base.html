<!doctype html>
<html lang="en">
  <head>
    {% block head %}
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"> -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>AttachYourIdeas</title>
    {% endblock %}

    {% load static %}
    <link rel="shortcut icon" href="{% static '/favicon.png' %}" type="image/png">
    <link rel="stylesheet" href="{% static '/style.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static '/styleCard.css' %}" type="text/css">
    <link rel="stylesheet" href="https://fengyuanchen.github.io/cropperjs/css/cropper.css">

  </head>


  <body class="bg-dark">
    

{% block navbar %}
 
 <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark border-bottom border-danger px-5">
  <a class="navbar-brand" href="/"><h3><span class="badge badge-danger">Attach Ideas</span></h3></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <form class="form-inline pl-5 my-2 my-lg-0 w-100">
      <input class="form-control mr-sm-2 w-75" type="search" placeholder="Поиск" aria-label="Поиск">
      <button class="btn btn-outline-danger my-2 my-sm-0" type="submit">Поиск</button>
    </form>
    <ul class="navbar-nav mr-auto ">
      {% if user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'logout' %}">Выход <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'post_master' %}">Создать публикацию</a>
        </li>
      {% else %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'signup' %}">Регистрация</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'login' %}">Вход <span class="sr-only">(current)</span></a>
        </li>
      {% endif %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'user_profiles' %}">Пользователи <span class="sr-only">(current)</span></a>
        </li>
      {% if user.is_authenticated %}
      <li class="nav-item dropdown">
        <div class="btn-group dropdown">
          <button type="button" class="btn btn-dark" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img class="rounded-circle img-fluid border border-danger" src="{{ user.profile.image.url }}" width="90" height="90">
          </button>
          <div class="dropdown-menu dropdown-menu-right">
            <!-- Dropdown menu links -->
            <a class="dropdown-item" href="{% url 'profile' pk=user.profile.id %}">Профиль<span class="sr-only">(current)</span></a>
            <a class="dropdown-item" href="{% url 'profile_edit' pk=user.profile.id %}">Редактировать <span class="sr-only">(current)</span></a>        
            <a class="dropdown-item" href="{% url 'logout' %}">Выход <span class="sr-only">(current)</span></a>   
            <button class="dropdown-item" type="button">Something else here</button>
          </div>
        </div>
      </li>
      {% endif %}
    </ul>
  </div>
</nav>
 
{% endblock %}


  {% if messages %}
    {% for message in messages %}
      <!-- <div class="alert-danger">     {{ message.tags }}
        {{ message }}
      </div> -->

            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              <h3 align="middle"> <strong>{{ message }}</strong> </h3>
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

    {% endfor %}
  {% endif %}

  {% block profilePage %} {% endblock %}
  {% block content %} {% endblock %}
  {% block sign %} {% endblock %}
  {% block login %} {% endblock %}
  {% block logout %} {% endblock %}
  {% block post_detail %} {% endblock %}
  {% block post_form %} {% endblock %}
  {% block post_delete %} {% endblock %}  
  {% block profiles_list %} {% endblock %}
  {% block user-content %} {% endblock %}


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="{% static 'js/jquery-3.4.0.min.js' %}"></script>
    <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'js/infinite.min.js' %}"></script>
    {% block scriptInfinite %} {% endblock %}  

    <script src="https://fengyuanchen.github.io/cropperjs/js/cropper.js"></script>
      <script>
        window.addEventListener('DOMContentLoaded', function () {
          var image = document.getElementById('image');
          var cropBoxData;
          var canvasData;
          var cropper;

          $('#modal').on('shown.bs.modal', function () {
            cropper = new Cropper(image, {
              autoCropArea: 0.5,
              ready: function () {
                //Should set crop box data first here
                cropper.setCropBoxData(cropBoxData).setCanvasData(canvasData);
              }
            });
          }).on('hidden.bs.modal', function () {
            cropBoxData = cropper.getCropBoxData();
            canvasData = cropper.getCanvasData();
            cropper.destroy();
          });
        });
    </script>

  </body>
</html>